# compiling-system

这是一个编译系统综合实验
## 实验介绍
编译系统综合实验旨在学生能够掌握编译系统的体系构造、设计过程。编译系统综合实验分三个阶段完成：词法分析程序、语法分析程序、语法制导翻译及中间代码生成，最终三个阶段程序合并成编译系统综合程序。
## 实验要求和指导：
### 实验阶段 1：词法分析程序实验 
#### 一、实验的目的与任务：
本实验要求学生编写词法分析函数，从输入的源程序中，识别出各个具有独立意义的单
词，即基本保留字、标识符、常数、运算符、分隔符五大类。并依次输出各个单词的内部编
码及单词符号自身值。词法分析的目的是将输入的源程序进行划分，给出基本符号（token）
的序列，并过滤注解和空格等分隔符，词法分析为下一个阶段的语法分析提供单词序列。
#### 二、实验要求 
学时：8
1. 课前准备：复习词法分析相关算法，参考教材第 3 章 83~85 页；
2. 上机二次，第一次授课并布置任务并设计，第二次开发程序并完善；
3. 提交实验报告；
4. 演示程序汇报。
#### 三、实验任务
准备：确定并熟悉开发工具，如 JAVA 、C、C++等；充分了解被处理的语言的语法特点（语言定义见下面）。写好实验报告，编好程序并测试。实现编译器的以下功能：
1. 分隔单词，二元组形式输出(单词名称，单词类别)；
2. 删除注释；
3. 删除空白符（空格、回车符、制表符）；
4. 发现并定位错误；
5. 建立符号表，并按照顺序打印输出；
##### 实验指导：
1. 设计有限状态自动机，参考教材 83~84 页；
2. 设计缓冲区数组；
3. 确定输入输出格式；
#### 四、实验报告要求
1. 程序关键源代码；
2. 已经测试通过的测试数据至少 3 组；
3. 实验报告按照规定要求书写：
（1）功能描述：该程序具有什么功能？
（2）程序结构描述：函数调用格式、参数含义、返回值描述、函数功能；
4. 符号表的设计和结构，另外可以附加函数之间的调用关系图、程序总体执行流程图。
5. 实验总结。
教材：
编译原理（第 2 版），Alfred V.Aho 等著，赵建华等译，机械工业出版社

### 实验阶段 2：语法分析程序实验 
#### 一、实验的目的与任务：
根据给出的文法编制 LR（1）分析程序，以便对任意输入的符号串进行分析。本次实验
的目的主要是加深对 LR（1）分析法的理解。
#### 二、实验要求 
学时：16
1. 课前准备：复习词法分析相关算法，参考教材第 4 章；
2. 上机四次，第一次授课并布置任务，第二次完成语法分析算法设计；第三次生成语法
分析表；第四次写出用分析表分析源程序的程序。
3. 提交实验报告；
4. 演示程序汇报。
#### 三、实验任务
实现编译器的以下功能：
1. 输出语法分析表；
2. 输出分析表分析栈内容；
实验指导：
1. LR（1）分析法的功能
LR（1）分析法的功能是利用 LR（1）分析表，对输入符号串自下而上的分析过程。
2. LR（1）分析表的构造函数及分析过程。
分析表的构造参考课本 167 页图 4-40。
分析过程参考课本 160 页图 4-36。
程序输出参考课本 160 页图 4-38。
#### 四、实验报告要求
1. 程序关键源代码；
2. 已经测试通过的测试数据至少 3 组；
3. 实验报告按照规定要求书写：
（1）功能描述：该程序具有什么功能？
（2）程序结构描述：函数调用格式、参数含义、返回值描述、函数功能；
4. 符号表的设计和结构，另外可以附加函数之间的调用关系图、程序总体执行流程图。
5. 实验总结。
#### 五、程序设计语言文法如下
```
program → block
block→{ decls stmts}
decls → decls decl | ε
decl → type id;
type → type[num] | basic
stmts → stmts stmt | ε
stmt → loc=bool;
 | if(bool)stmt
 | if(bool)stmt else stmt
 | while(bool)stmt
 | do stmt while(bool);
 | break;
 | block
Loc → loc[num] | id
bool →bool || join | join
join → join ＆＆ equality | equality
equality → equality==rel | equality ！= rel | rel
rel → expr<expr |expr<=expr|expr>=expr|expr>expr|expr
expr → expr+term |expr-term |term
term → term*unary|term/unary|unary
unary→！unary | -unary | factor
factor→ (bool) | loc | num | real | true |false
```
### 实验阶段 3：语法制导翻译与生成中间代码 
#### 一、实验的目的与任务：
通过语法制导技术生成中间代码，设计中间代码语义规则并嵌入语法规则中。在语法分析过程中，同时输出等价的中间代码。
#### 二、实验要求 
学时：12
1. 课前准备：复习词法分析相关算法，参考教材第 5~6 章；
2. 上机三次，第一次授课并布置任务，第二次完成语义规则设计；第三次开发语法制导翻译程序。
3. 提交实验报告；
4. 演示程序汇报。
#### 三、实验任务
实现编译器的以下功能：
1. 输出语法分析过程；
2. 输出中间代码，要求三地址代码；
实验指导：
理解并应用课本的语法制导技术。
参考课本 264 页图 6-43，课本 267 页图 6-46。
或者课本 258 页图 6-36，图 6-37。
在自底向上语法分析基础上设计语义规则（语法制导翻译），将源程序翻译为四元式输
出，若有错误将错误信息输出。
#### 四、实验报告要求
1. 程序关键源代码；
2. 已经测试通过的测试数据至少 3 组；
3. 实验报告按照规定要求书写：
（1）功能描述：该程序具有什么功能？
（2）程序结构描述：函数调用格式、参数含义、返回值描述、函数功能；
4. 符号表的设计和结构，另外可以附加函数之间的调用关系图、程序总体执行流程图。
5. 实验总结。
文法规则：
```
program → block
block→{ decls stmts}
decls → decls decl | ε
decl → type id;
type → type[num] | basic
stmts → stmts stmt | ε
stmt → loc=bool;
 | if(bool)stmt
 | if(bool)stmt else stmt
 | while(bool)stmt
 | do stmt while(bool);
 | break;
 | block
Loc → loc[bool] | id
bool →bool || join | join
join → join ＆＆ equality | equality
equality → equality==rel | equality ！= rel | rel
rel → expr<expr |expr<=expr|expr>=expr|expr>expr|expr
expr → expr+term |expr-term |term
term → term*unary|term/unary|unary
unary→！unary | -unary | factor
factor→ (bool) | loc | num | real | true |false
```